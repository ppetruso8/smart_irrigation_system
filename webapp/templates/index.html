{% extends "base.html" %}

{% block main_content %}
    <h1>Dashboard</h1>
    <section id = "sensors">
        <h2>Sensors</h2>
        <section id="sensors_container">
            {% for sensor in sensors %}
            <section class = "sensor">
                <h3>Sensor {{ sensor.sensor_no }}</h3>
                <p>Soil Moisture: {{ sensor.moisture }}</p>
                <p>Temperature: {{ sensor.temperature }} Â°C</p>
                <p>Humidity: {{ sensor.humidity }} %</p>
                <p>Brightness: {{ sensor.brightness }}</p>
                <button onclick="refresh()">Update</button>
                <p>Pump: {{ sensor.pump }}</p>
                <p>Sensor: {{ sensor.sensor_no }}</p>
                <p>Environment: {{ sensor.env }}</p>
                <p>Watering Mode: {{ sensor.mode }}</p>
                <button onclick="pump('on')">Manual Watering</button>
            </section>
            {% endfor %}
        </section>
    </section>

    <section id = "weather">
        <h2>Weather</h2>
        <section id="current_weather">
            <h3>Current Weather</h3>
        
            <div class="weather_item">
                <p class="weather_icon" >ğŸŒ¡</p>
                <p>Temperature</p>
                <p>{{ weather.temperature }}Â°C</p>
            </div>
        
            <div class="weather_item">
                <p class="weather_icon">ğŸŒ¥</p>
                <p>Status</p>
                <p>{{ weather.weathercode }}</p>
            </div>
        
            <div class="weather_item">
                <p class="weather_icon">à¼„</p>
                <p>Wind Speed</p>
                <p>{{ weather.windspeed }} km/h</p>
            </div>
        
            <div class="weather_item">
                <p class="weather_icon">ğŸ§­</p>
                <p>Wind Direction</p>
                <p>{{ weather.winddirection }}Â°</p>
            </div>
        </section>

        <section id="hourly_forecast">
            <h3>2-Day Hourly Weather Forecast</h3>
            <section id="hourly_container">
                {% for index, row in hourly.iterrows() %}
                    <div class="hourly_item">
                        <p class="time">{{ row['time'] }}</p>
                        <p class="temp" title="Temperature">&nbspğŸŒ¡ {{ row['temperature_2m'] }}Â°C</p>
                        <p class="precipitation" title="Precipitation">ğŸ’§ {{ row['precipitation'] }}mm</p>
                        <p class ="precipitation" title="Chance of Precipitation">â˜” {{ row['precipitation_probability'] }}%</p>
                        <p class ="humidity" title="Humidity">ğŸŒ«ï¸ {{ row['relativehumidity_2m'] }}%</p>
                        <p class="weather_status">{{ row['weathercode'] }}</p>
                    </div>
                {% endfor %}
            </section>
        </section>

        <section id="daily_forecast">
            <h3>5-Day Weather Forecast</h3>
            <section id="daily_container">
                {% for index, row in daily.iterrows() %}
                    <div class="daily_item">
                        <p class="time">{{ row['time'] }}</p>
                        <p class="temp" title="Highest Temperature">â†‘ğŸŒ¡ {{ row['temperature_2m_max'] }}Â°C</p>
                        <p class="temp" title="Lowest Temperature">â†“ğŸŒ¡ {{ row['temperature_2m_min'] }}Â°C</p>
                        <p class="precipitation" title="Precipitation">ğŸ’§ {{ row['precipitation_sum'] }}mm</p>
                        <p class="weather_status">{{ row['weathercode'] }}</p>
                    </div>
                {% endfor %}
            </section>
        </section>        
    </section>


{% endblock %}